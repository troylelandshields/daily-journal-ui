{"version":3,"sources":["logo.svg","services/config.js","services/auth.js","components/login/PrivateRoute.js","components/login/Login.js","components/nav/NavBar.js","components/pages/Entries.js","components/pages/Settings.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","config","apiHost","axios","defaults","headers","common","auth","isAuthenticated","authenticate","googleToken","cb","window","localStorage","setItem","get","concat","then","authResponse","user","data","autoLogin","storedToken","getItem","signout","console","log","removeItem","PrivateRoute","_ref","Component","component","rest","Object","objectWithoutProperties","react_default","a","createElement","Route","assign","render","props","Redirect","to","pathname","state","from","location","Login","redirectToPreviousRoute","responseGoogle","response","tokenId","_this","setState","failGoogle","componentWillMount","this","google_login","clientId","buttonText","onSuccess","onFailure","Logout","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","logout","redirect","renderRedirect","Button","onClick","NavBar","Row","Col","Link","id","NavBar_Logout","login_Login","Entry","md","mdOffset","dist_default","format","date","entry","Entries","loadEntries","pageNum","match","params","userId","resp","entries","loadedEntries","map","push","hasMore","length","items","key","react_infinite_scroller_default","pageStart","loadMore","bind","loader","className","Settings","handleChange","event","settings","phoneNumber","target","value","handleSubmit","put","phone_number","alert","preventDefault","_this2","type","onChange","name","App","Grid","nav_NavBar","login_PrivateRoute","path","ReactDOM","BrowserRouter","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.0e0e2b4c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","const config = {\n    apiHost: \"https://buffalo-journal.herokuapp.com/\"\n}\n\nexport default config;","import axios from 'axios';\nimport config from './config.js';\n\naxios.defaults.headers.common['Accept'] = \"application/json\";\n\nconst auth = {\n    isAuthenticated: false,\n    authenticate(googleToken, cb) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \" + googleToken;\n\n        window.localStorage.setItem(\"token\", googleToken);\n\n\t\taxios.get(`${config.apiHost}/auth/google`)\n\t\t.then((authResponse) => {\n            debugger;\n            auth.isAuthenticated = true\n            auth.user = authResponse.data;\n\n            if (cb) cb();\n\t\t});\n        \n    },\n    autoLogin(cb) {\n        const storedToken = window.localStorage.getItem(\"token\");\n        if (storedToken) {\n            auth.authenticate(storedToken, cb);\n        }\n    },\n    signout(cb) {\n        console.log(\"bye now!\");\n        auth.isAuthenticated = false;\n        auth.user = null;\n        window.localStorage.removeItem(\"token\");\n\n        if (cb) cb();\n    }\n}\n\n\n\nexport default auth;","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Route,\n    Redirect,\n} from 'react-router-dom';\nimport auth from '../../services/auth.js';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={(props) => (\n        auth.isAuthenticated === true\n            ? <Component {...props} />\n            : <Redirect to={{\n                pathname: '/',\n                state: { from: props.location }\n            }}\n            />\n    )} />\n);\n\nexport default PrivateRoute;","import React, { Component } from 'react';\nimport {\n\tRoute,\n\tLink,\n\tRedirect,\n\tBrowserRouter as Router,\n  } from 'react-router-dom';\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\nimport axios from 'axios';\nimport auth from '../../services/auth.js';\n\nclass Login extends Component {\n\tstate = {\n\t\tredirectToPreviousRoute: false\n\t};\n\n\tresponseGoogle = (response) => {\n\t\tauth.authenticate(response.tokenId, () => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\tfailGoogle = (response) => {\n\t\tconsole.log(\"login failed\", response);\n\t\taxios.defaults.headers.common['Authorization'] = null;\n\t}\n\n\tcomponentWillMount = () => {\n\t\tauth.autoLogin(() => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\trender() {\n\t\t\n\n\t\t// const { from } = this.props.location.state || { from: { pathname: \"/\" } };\n\t\tconst from = \"/\";\n\t\tconst { redirectToPreviousRoute } = this.state;\n\t\n\t\tif (redirectToPreviousRoute) {\n\t\t  return <Redirect to={from} />;\n\t\t}\n\n\t\treturn (\n\t\t\t<GoogleLogin\n\t\t\t\tclientId=\"300709606324-sec60nd2b4hba9b1gkqdcpdlhv2p89kk.apps.googleusercontent.com\"\n\t\t\t\tbuttonText=\"Login\"\n\t\t\t\tonSuccess={this.responseGoogle}\n\t\t\t\tonFailure={this.failGoogle}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport { Grid, Row, Col, Button } from 'react-bootstrap';\nimport { Link, Redirect } from 'react-router-dom';\nimport Login from '../login/Login.js';\nimport auth from '../../services/auth.js'\n\n\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tredirect: false\n\t\t};\n    }\n    \n    logout = () => {\n        auth.signout(() => {\n            this.setState({\n                redirect: true\n            });\n        });\n        \n    }\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to='/' />\n        }\n      }\n\n\trender() {\n\t\treturn (\n            <div>\n                {this.renderRedirect()}\n                <Button onClick={this.logout}>\n                    Logout\n                </Button>\n            </div>\n\t\t);\n\t}\n}\n\n\nfunction NavBar() {\n    return (\n        <Row>\n            <Col>\n                { auth.isAuthenticated \n                    ? <Link to={`/journal/${auth.user.id}`}>Journal</Link> \n                    : null }\n            </Col>\n            <Col>\n                { auth.isAuthenticated \n                    ? <Link to={`/settings/${auth.user.id}`}>Settings</Link> \n                    : null }\n            </Col>\n            <Col>\n                { auth.isAuthenticated \n                    ? <Logout></Logout> \n                    : null }\n            </Col>\n            <Col>\n                <Login></Login>\n            </Col>\n        </Row>\n    )\n}\n\nexport default NavBar;","import React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport { Row, Col } from 'react-bootstrap';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport axios from 'axios';\nimport config from '../../services/config.js';\n\nfunction Entry(props) {\n\treturn (\n\t\t<Row>\n\t\t\t<Col md={2} mdOffset={2}>\n\t\t\t\t<Moment format=\"YYYY/MM/DD\">{props.data.date}</Moment>\n\t\t\t</Col>  \n\t\t\t<Col md={8} mdOffset={2}>\n\t\t\t\t{props.data.entry}\n\t\t\t</Col>  \n\t\t</Row>\n\t)\n}\n\nclass Entries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tentries: [],\n\t\t\thasMore: true\n\t\t};\n\t}\n\n\tloadEntries = (pageNum) => {\n\t\tvar perPage = 20;\n\t\taxios.get(`${config.apiHost}/users/${this.props.match.params.userId}/entries/?page=${pageNum}&per_page=${perPage}`)\n\t\t\t.then((resp) => {\n\t\t\t\tvar entries = this.state.entries;\n\t\t\t\tvar loadedEntries = resp.data;\n\n\t\t\t\tloadedEntries.map((entry) => {\n\t\t\t\t\tentries.push(entry);\n\t\t\t\t});\n\n\t\t\t\tvar hasMore = true;\n\t\t\t\tif (loadedEntries.length < perPage) {\n\t\t\t\t\thasMore = false;\n\t\t\t\t}\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tentries: entries,\n\t\t\t\t\thasMore: hasMore\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\trender() {\n\t\tvar items = [];\n\n\t\tthis.state.entries.map(entry => {\n\t\t\titems.push(<Entry key={entry.id} data={entry}></Entry>);\n\t\t})\n\n\n\t\treturn (\n\t\t\t<InfiniteScroll\n\t\t\t\tpageStart={0}\n\t\t\t\tloadMore={this.loadEntries.bind(this)}\n\t\t\t\thasMore={this.state.hasMore}\n\t\t\t\tloader={<div className=\"loader\" key={0}>Loading ...</div>}\n\t\t\t>\n\t\t\t\t{items}\n\t\t\t</InfiniteScroll>\n\n\t\t);\n\t}\n}\n\nexport default Entries;\n","import React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport { Row, Col } from 'react-bootstrap';\n// import { GoogleLogin, GoogleLogout } from 'react-google-login';\nimport axios from 'axios';\n\nclass Settings extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsettings: {\n\t\t\t\tphoneNumber: \"\"\n\t\t\t}\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\taxios.get(`http://localhost:3000/users/${this.props.match.params.userId}/`)\n\t\t\t.then((resp) => {\n\t\t\t\tvar phoneNumber = resp.data.phone_number;\n\t\t\t\tthis.setState({\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tphoneNumber: phoneNumber ? phoneNumber : \"\" \n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\t    \n\thandleChange = (event) =>  {\n\t\tthis.setState({\n\t\t\tsettings: {\n\t\t\t\tphoneNumber: event.target.value\n\t\t\t}\n\t\t});\n\t}\n    \n\thandleSubmit = (event) => {\n\t\taxios.put(`http://localhost:3000/users/${this.props.match.params.userId}/`, {\n\t\t\t\"phone_number\": this.state.settings.phoneNumber\n\t\t}).then((resp) => {\n\t\t\talert(\"successfully updated your phone number\");\n\t\t});\n\t\tevent.preventDefault();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Row>\n\t\t\t\t<Col>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<label>Phone Number</label>\n\t\t\t\t\t\t<input type='text' value={this.state.settings.phoneNumber} onChange={this.handleChange} name='phone_number' /> \n\t\t\t\t\t\t<input type='submit' value='Submit' onClick={this.handleSubmit}/>\n\t\t\t\t\t</form>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n\nexport default Settings;\n","import React, { Component } from 'react';\nimport { Grid, Row, Col, Button } from 'react-bootstrap';\nimport { Route, Link } from 'react-router-dom';\nimport PrivateRoute from './components/login/PrivateRoute';\nimport NavBar from './components/nav/NavBar.js';\nimport Entries from './components/pages/Entries.js';\nimport Settings from './components/pages/Settings.js';\nimport logo from './logo.svg';\nimport './App.css';\n\nclass App extends Component {\n  render() {\n\n    return (\n      <div>\n        <Grid>\n          <NavBar></NavBar>\n\n          <PrivateRoute path=\"/journal/:userId\" component={Entries} />\n          <PrivateRoute path=\"/settings/:userId\" component={Settings} />\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport Popper from 'popper.js';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>\n, document.getElementById('root'));\n"],"sourceRoot":""}