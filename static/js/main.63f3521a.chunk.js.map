{"version":3,"sources":["services/config.js","services/auth.js","components/login/PrivateRoute.js","components/login/Login.js","components/nav/NavBar.js","components/pages/Entries.js","components/pages/stripe/CheckoutForm.js","components/pages/Settings.js","App.js","index.js"],"names":["config","apiHost","stripeKey","axios","defaults","headers","common","auth","isAuthenticated","isSubscribed","user","subscription_id","isSetUp","phone_number","authenticate","googleToken","cb","window","localStorage","setItem","get","concat","then","authResponse","data","autoLogin","storedToken","getItem","signout","console","log","removeItem","PrivateRoute","_ref","Component","component","rest","Object","objectWithoutProperties","react_default","a","createElement","Route","assign","render","props","Redirect","to","pathname","state","from","location","Login","redirectToPreviousRoute","responseGoogle","response","tokenId","_this","setState","failGoogle","componentWillMount","this","google_login","clientId","buttonText","onSuccess","onFailure","Logout","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","logout","redirect","renderRedirect","NavDropdown","Item","onSelect","NavBar","Navbar","sticky","Nav","defaultActiveKey","Link","as","eventKey","id","title","first_name","NavBar_Logout","login_Login","Entry","gradient","endColor","r","g","b","startColor","cornerRadius","Row","Col","md","mdOffset","sm","smOffset","style","background","color","marginBottom","marginRight","padding","borderTopLeftRadius","dist_default","format","date","opacity","fromNow","borderTopRightRadius","fontSize","backgroundColor","entry","Entries","loadEntries","pageNum","match","params","userId","resp","entries","loadedEntries","randDiff","num","diff","Math","floor","random","plusMinusRatio","forEach","length","push","hasMore","items","key","lib","position","left","react_infinite_scroller_default","pageStart","loadMore","bind","loader","marginTop","CheckoutForm","submit","assertThisInitialized","ev","stripe","createToken","name","token","post","card_token","_this2","className","es","onClick","injectStripe","Settings","handleChange","event","phoneNumber","target","value","handleSubmit","put","alert","preventDefault","handleSubscribe","type","onChange","href","stripe_CheckoutForm","App","Container","apiKey","nav_NavBar","login_PrivateRoute","path","ReactDOM","HashRouter","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.63f3521a.chunk.js","sourcesContent":["const config = {\n    // apiHost: \"http://localhost:3000\",\n    // stripeKey: \"pk_test_Yptgsj6W2rIreWbKt0mUi2R5\"\n    apiHost: \"https://buffalo-journal.herokuapp.com\",\n    stripeKey: \"pk_live_doxQ9etmZ8nozRk89VmvoOrZ\"\n}\n\nexport default config;","import axios from 'axios';\nimport config from './config.js';\n\naxios.defaults.headers.common['Accept'] = \"application/json\";\n\nconst auth = {\n    isAuthenticated: false,\n    isSubscribed() {\n        return auth.user.subscription_id != null ;\n    },\n    isSetUp() {\n        return auth.user.subscription_id != null && auth.user.phone_number != null;\n    },\n    authenticate(googleToken, cb) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \" + googleToken;\n        axios.defaults.headers.common['X-Dumb-Authorization'] = \"Bearer \" + googleToken;\n\n        window.localStorage.setItem(\"token\", googleToken);\n\n\t\taxios.get(`${config.apiHost}/auth/google`)\n\t\t.then((authResponse) => {\n            auth.isAuthenticated = true\n            auth.user = authResponse.data;\n\n            if (cb) cb();\n\t\t});\n        \n    },\n    autoLogin(cb) {\n        const storedToken = window.localStorage.getItem(\"token\");\n        if (storedToken) {\n            auth.authenticate(storedToken, cb);\n        }\n    },\n    signout(cb) {\n        console.log(\"bye now!\");\n        auth.isAuthenticated = false;\n        auth.user = null;\n        window.localStorage.removeItem(\"token\");\n\n        if (cb) cb();\n    }\n}\n\n\n\nexport default auth;","import React from 'react';\nimport {\n    Route,\n    Redirect,\n} from 'react-router-dom';\nimport auth from '../../services/auth.js';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={(props) => (\n        auth.isAuthenticated === true\n            ? <Component {...props} />\n            : <Redirect to={{\n                pathname: '/',\n                state: { from: props.location }\n            }}\n            />\n    )} />\n);\n\nexport default PrivateRoute;","import React, { Component } from 'react';\nimport {\n\tRedirect\n  } from 'react-router-dom';\nimport { GoogleLogin } from 'react-google-login';\nimport axios from 'axios';\nimport auth from '../../services/auth.js';\n\nclass Login extends Component {\n\tstate = {\n\t\tredirectToPreviousRoute: false\n\t};\n\n\tresponseGoogle = (response) => {\n\t\tauth.authenticate(response.tokenId, () => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\tfailGoogle = (response) => {\n\t\tconsole.log(\"login failed\", response);\n\t\taxios.defaults.headers.common['Authorization'] = null;\n\t}\n\n\tcomponentWillMount = () => {\n\t\tauth.autoLogin(() => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\trender() {\n\t\tconst from = \"/\";\n\t\tconst { redirectToPreviousRoute } = this.state;\n\t\n\t\tif (redirectToPreviousRoute) {\n\t\t  return <Redirect to={from} />;\n\t\t}\n\n\t\treturn (\n\t\t\t<GoogleLogin\n\t\t\t\tclientId=\"300709606324-sec60nd2b4hba9b1gkqdcpdlhv2p89kk.apps.googleusercontent.com\"\n\t\t\t\tbuttonText=\"Login\"\n\t\t\t\tonSuccess={this.responseGoogle}\n\t\t\t\tonFailure={this.failGoogle}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap';\nimport { Link, Redirect } from 'react-router-dom';\nimport Login from '../login/Login.js';\nimport auth from '../../services/auth.js'\n\n\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tredirect: false\n\t\t};\n    }\n    \n    logout = () => {\n        auth.signout(() => {\n            this.setState({\n                redirect: true\n            });\n        });\n        \n    }\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to='/' />\n        }\n      }\n\n\trender() {\n\t\treturn (\n            <div>\n                {this.renderRedirect()}\n                <NavDropdown.Item onSelect={this.logout}>\n                    Logout\n                </NavDropdown.Item>\n            </div>\n\t\t);\n\t}\n}\n\n\nfunction NavBar() {\n    return (\n        <Navbar sticky=\"top\">\n            { auth.isAuthenticated \n            ? <Nav defaultActiveKey=\"journal\">\n                <Nav.Link as={Link} eventKey=\"journal\" to={`/journal/${auth.user.id}`}>Journal</Nav.Link> \n                <Nav.Link as={Link} eventKey=\"settings\" to={`/settings/${auth.user.id}`}>Settings</Nav.Link> \n                <NavDropdown title={auth.user.first_name} id=\"user-dropdown\">\n                    <Logout></Logout>\n                </NavDropdown>\n            </Nav>\n            : <Login></Login> }\n        </Navbar>\n    )\n}\n\nexport default NavBar;","import React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport { Row, Col } from 'react-bootstrap';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport axios from 'axios';\nimport config from '../../services/config.js';\nimport { CoffeeLoading } from 'react-loadingg';\n\nfunction Entry(props) {\n\tlet gradient = `linear-gradient(0deg, rgba(${props.endColor.r},${props.endColor.g},${props.endColor.b},1) 0%, rgba(${props.startColor.r},${props.startColor.g},${props.startColor.b},1) 100%)`;\n\tlet cornerRadius = props.cornerRadius ? props.cornerRadius : \"0px\";\n\t\n\treturn (\n\t\t<Row>\n\t\t\t<Col md={2} mdOffset={2} sm={2} smOffset={2} style={{background: gradient, color: \"white\", marginBottom:\"2px\", marginRight:\"2px\", padding:\"15px\", borderTopLeftRadius: cornerRadius}}>\n\t\t\t\t<Row><Col><Moment format=\"YYYY/MM/DD\">{props.data.date}</Moment></Col></Row>\n\t\t\t\t<Row><Col><Moment style={{opacity: \"50%\"}} fromNow>{props.data.date}</Moment></Col></Row>\n\t\t\t</Col>  \n\t\t\t<Col style={{background: gradient, color: \"black\", marginBottom:\"2px\", padding:\"15px\", borderTopRightRadius: cornerRadius, fontSize: \"20px\"}}>\n\t\t\t\t<div style={{backgroundColor: \"white\", padding:\"10px\", borderTopRightRadius: cornerRadius, opacity:\"70%\"}}>{props.data.entry}</div>\n\t\t\t</Col>  \n\t\t</Row>\n\t)\n}\n\nclass Entries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tentries: [],\n\t\t\thasMore: true,\n\t\t\tcolor: {\n\t\t\t\tr: 0,\n\t\t\t\tg: 128,\n\t\t\t\tb: 181\n\t\t\t}\n\t\t};\n\t}\n\n\tloadEntries = (pageNum) => {\n\t\tvar perPage = 20;\n\t\taxios.get(`${config.apiHost}/users/${this.props.match.params.userId}/entries/?page=${pageNum}&per_page=${perPage}`)\t\n\t\t\t.then((resp) => {\n\t\t\t\tvar entries = this.state.entries;\n\t\t\t\tvar loadedEntries = resp.data;\n\n\t\t\t\tlet startColor = this.state.color;\n\n\t\t\t\tlet randDiff = (num) => {\n\t\t\t\t\tlet diff = Math.floor(Math.random() * 32);\n\n\t\t\t\t\t// if num = 128\n\t\t\t\t\tlet plusMinusRatio = 1 - (num / 128)\n\n\t\t\t\t\tif (Math.random() < plusMinusRatio) {\n\t\t\t\t\t\treturn num + diff;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn num - diff;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tloadedEntries.forEach((entry) => {\n\t\t\t\t\tlet endColor = {\n\t\t\t\t\t\tr: randDiff(startColor.r), g: randDiff(startColor.g), b: randDiff(startColor.b)\n\t\t\t\t\t};\n\n\t\t\t\t\tentry.startColor = startColor;\n\t\t\t\t\tentry.endColor = endColor;\n\n\t\t\t\t\tif (entries.length === 0) {\n\t\t\t\t\t\tentry.cornerRadius = \"15px\";\n\t\t\t\t\t}\n\n\t\t\t\t\tentries.push(entry);\n\n\t\t\t\t\tstartColor = endColor;\n\t\t\t\t});\n\n\t\t\t\tvar hasMore = true;\n\t\t\t\tif (loadedEntries.length < perPage) {\n\t\t\t\t\thasMore = false;\n\t\t\t\t}\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tentries: entries,\n\t\t\t\t\thasMore: hasMore,\n\t\t\t\t\tcolor: startColor\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\trender() {\n\t\tvar items = [];\n\n\t\tthis.state.entries.forEach(entry => {\n\t\t\titems.push(<Entry startColor={entry.startColor} endColor={entry.endColor} key={entry.id} cornerRadius={entry.cornerRadius} data={entry}></Entry>);\n\t\t})\n\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t{<CoffeeLoading style={{position: 'relative', left:'50%', marginBottom: \"10px\"}} /> }\n\t\t\t<InfiniteScroll\n\t\t\t\tpageStart={0}\n\t\t\t\tloadMore={this.loadEntries.bind(this)}\n\t\t\t\thasMore={this.state.hasMore}\n\t\t\t\tloader={this.state.entries.length > 0 ? <CoffeeLoading style={{position: 'relative', left:'50%', marginTop:\"20px\"}} /> : null}\n\t\t\t>\n\t\t\t\t{items}\n\t\t\t</InfiniteScroll>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Entries;\n","import React, {Component} from 'react';\nimport {CardElement, injectStripe} from 'react-stripe-elements';\nimport config from '../../../services/config.js';\nimport axios from 'axios';\n\nclass CheckoutForm extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n  }\n\n  async submit(ev) {\n    let {token} = await this.props.stripe.createToken({name: this.props.userId});\n\n    axios.post(`${config.apiHost}/users/${this.props.userId}/subscription`, {\n      \"card_token\": token.id\n    }).then((resp) => {\n      console.log(\"cool\");\n      if (this.props.cb) {\n        this.props.cb();\n      }\n    });\n\n  }\n\n  render() {\n    return (\n      <div className=\"checkout\">\n        <p>Subscribe for <strong>$1.33</strong> per month with a 7-day free trial, cancel anytime</p>\n        <CardElement />\n        <button onClick={this.submit}>Subscribe for $1.33</button>\n      </div>\n    );\n  }\n}\n\nexport default injectStripe(CheckoutForm);\n","import React, { Component } from 'react';\nimport { Row, Col } from 'react-bootstrap';\nimport axios from 'axios';\nimport config from '../../services/config.js';\nimport CheckoutForm from './stripe/CheckoutForm.js';\nimport {Elements} from 'react-stripe-elements';\nimport auth from '../../services/auth.js';\n\nclass Settings extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tphoneNumber: \"\",\n\t\t\tisSubscribed: auth.isSubscribed()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\taxios.get(`${config.apiHost}/users/${this.props.match.params.userId}/`)\n\t\t\t.then((resp) => {\n\t\t\t\tvar phoneNumber = resp.data.phone_number;\n\t\t\t\tthis.setState({\n\t\t\t\t\tphoneNumber: phoneNumber ? phoneNumber : \"\" \n\t\t\t\t});\n\t\t\t});\n\t}\n\t    \n\thandleChange = (event) =>  {\n\t\tthis.setState({\n\t\t\tphoneNumber: event.target.value\n\t\t});\n\t}\n    \n\thandleSubmit = (event) => {\n\t\taxios.put(`${config.apiHost}/users/${this.props.match.params.userId}/`, {\n\t\t\t\"phone_number\": this.state.phoneNumber\n\t\t}).then((resp) => {\n\t\t\talert(\"successfully updated your phone number, congratulations\");\n\t\t});\n\t\tevent.preventDefault();\n\t}\n\n\thandleSubscribe = () => {\n\t\tthis.setState({\n\t\t\tisSubscribed: true\n\t\t});\n\n\t\tauth.user.subscription_id = \"they subbed dont worry about it\";\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t{ this.state.isSubscribed ?\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<label>Phone Number</label>\n\t\t\t\t\t\t\t\t<input type='text' value={this.state.phoneNumber} onChange={this.handleChange} name='phone_number' /> \n\t\t\t\t\t\t\t\t<input type='submit' value='Submit' onClick={this.handleSubmit}/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t:  null\n\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t{ !this.state.isSubscribed ? \n\t\t\t\t\t\t<Elements>\n\t\t\t\t\t\t\t<CheckoutForm userId={this.props.match.params.userId} cb={this.handleSubscribe}/>\n\t\t\t\t\t\t</Elements>\n\t\t\t\t\t\t:  <p>Thanks for subscribing--if you're trying to cancel you'll need to email me: <a href=\"mailto:dailyjournalsubscriptions@gmail.com?Subject=Cancellation\">dailyjournalsubscriptions@gmail.com</a></p>\n\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row> \n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Settings;\n","import React, { Component } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nimport {StripeProvider} from 'react-stripe-elements';\n\nimport PrivateRoute from './components/login/PrivateRoute';\nimport NavBar from './components/nav/NavBar.js';\nimport Entries from './components/pages/Entries.js';\nimport Settings from './components/pages/Settings.js';\nimport './App.css';\nimport config from './services/config';\nimport auth from './services/auth';\n\nclass App extends Component {\n  render() {\n\n    return (\n      <Container>\n        <StripeProvider apiKey={config.stripeKey}>\n          <div>\n              <NavBar></NavBar>\n\n              <PrivateRoute path=\"/journal/:userId\" component={Entries} />\n              <PrivateRoute path=\"/settings/:userId\" component={Settings} />\n\n              { auth.isAuthenticated && auth.isSetUp() ? <Redirect to={`/journal/${auth.user.id}`} /> : \n                auth.isAuthenticated && !auth.isSetUp() ? <Redirect to={`/settings/${auth.user.id}`} /> : \n                null } \n          </div>\n\n        </StripeProvider>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <Router>\n        <App/>\n    </Router>\n, document.getElementById('root'));\n"],"sourceRoot":""}