{"version":3,"sources":["services/config.js","services/auth.js","components/login/PrivateRoute.js","components/login/Login.js","components/nav/NavBar.js","components/pages/Entries.js","components/pages/stripe/CheckoutForm.js","components/pages/Settings.js","App.js","index.js"],"names":["config","apiHost","stripeKey","axios","defaults","headers","common","auth","isAuthenticated","isSubscribed","user","subscription_id","isSetUp","phone_number","authenticate","googleToken","cb","window","localStorage","setItem","get","concat","then","authResponse","data","autoLogin","storedToken","getItem","signout","console","log","removeItem","PrivateRoute","_ref","Component","component","rest","Object","objectWithoutProperties","react_default","a","createElement","Route","assign","render","props","Redirect","to","pathname","state","from","location","Login","redirectToPreviousRoute","responseGoogle","response","tokenId","_this","setState","failGoogle","componentWillMount","this","google_login","clientId","buttonText","onSuccess","onFailure","Logout","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","logout","redirect","renderRedirect","NavDropdown","Item","onSelect","NavBar","Navbar","sticky","Nav","defaultActiveKey","Link","as","eventKey","id","title","first_name","NavBar_Logout","login_Login","Entry","gradient","endColor","r","g","b","startColor","topCornerRadius","periodStart","bottomCornerRadius","periodEnd","baseStyle","background","marginBottom","padding","dateInfoStyle","objectSpread","color","marginRight","borderTopLeftRadius","borderBottomLeftRadius","entryColStyle","borderTopRightRadius","borderBottomRightRadius","fontSize","entryStyle","backgroundColor","opacity","Row","Col","md","mdOffset","sm","smOffset","style","dist_default","format","date","fromNow","entry","Entries","loadEntries","pageNum","match","params","userId","resp","entries","loadedEntries","randDiff","num","diff","Math","floor","random","plusMinusRatio","currentIdx","forEach","length","nextEntry","moment","month","push","hasMore","items","key","lib","position","left","react_infinite_scroller_default","pageStart","loadMore","bind","loader","marginTop","CheckoutForm","submit","assertThisInitialized","ev","stripe","createToken","name","token","post","card_token","_this2","className","es","onClick","injectStripe","Settings","handleChange","event","phoneNumber","target","value","handleSubmit","put","alert","preventDefault","handleSubscribe","type","onChange","href","stripe_CheckoutForm","App","Container","apiKey","nav_NavBar","login_PrivateRoute","path","ReactDOM","HashRouter","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.ed9e242c.chunk.js","sourcesContent":["const config = {\n    // apiHost: \"http://localhost:3000\",\n    // stripeKey: \"pk_test_Yptgsj6W2rIreWbKt0mUi2R5\"\n    apiHost: \"https://buffalo-journal.herokuapp.com\",\n    stripeKey: \"pk_live_doxQ9etmZ8nozRk89VmvoOrZ\"\n}\n\nexport default config;","import axios from 'axios';\nimport config from './config.js';\n\naxios.defaults.headers.common['Accept'] = \"application/json\";\n\nconst auth = {\n    isAuthenticated: false,\n    isSubscribed() {\n        return auth.user.subscription_id != null ;\n    },\n    isSetUp() {\n        return auth.user.subscription_id != null && auth.user.phone_number != null;\n    },\n    authenticate(googleToken, cb) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \" + googleToken;\n        axios.defaults.headers.common['X-Dumb-Authorization'] = \"Bearer \" + googleToken;\n\n        window.localStorage.setItem(\"token\", googleToken);\n\n\t\taxios.get(`${config.apiHost}/auth/google`)\n\t\t.then((authResponse) => {\n            auth.isAuthenticated = true\n            auth.user = authResponse.data;\n\n            if (cb) cb();\n\t\t});\n        \n    },\n    autoLogin(cb) {\n        const storedToken = window.localStorage.getItem(\"token\");\n        if (storedToken) {\n            auth.authenticate(storedToken, cb);\n        }\n    },\n    signout(cb) {\n        console.log(\"bye now!\");\n        auth.isAuthenticated = false;\n        auth.user = null;\n        window.localStorage.removeItem(\"token\");\n\n        if (cb) cb();\n    }\n}\n\n\n\nexport default auth;","import React from 'react';\nimport {\n    Route,\n    Redirect,\n} from 'react-router-dom';\nimport auth from '../../services/auth.js';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={(props) => (\n        auth.isAuthenticated === true\n            ? <Component {...props} />\n            : <Redirect to={{\n                pathname: '/',\n                state: { from: props.location }\n            }}\n            />\n    )} />\n);\n\nexport default PrivateRoute;","import React, { Component } from 'react';\nimport {\n\tRedirect\n  } from 'react-router-dom';\nimport { GoogleLogin } from 'react-google-login';\nimport axios from 'axios';\nimport auth from '../../services/auth.js';\n\nclass Login extends Component {\n\tstate = {\n\t\tredirectToPreviousRoute: false\n\t};\n\n\tresponseGoogle = (response) => {\n\t\tauth.authenticate(response.tokenId, () => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\tfailGoogle = (response) => {\n\t\tconsole.log(\"login failed\", response);\n\t\taxios.defaults.headers.common['Authorization'] = null;\n\t}\n\n\tcomponentWillMount = () => {\n\t\tauth.autoLogin(() => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\trender() {\n\t\tconst from = \"/\";\n\t\tconst { redirectToPreviousRoute } = this.state;\n\t\n\t\tif (redirectToPreviousRoute) {\n\t\t  return <Redirect to={from} />;\n\t\t}\n\n\t\treturn (\n\t\t\t<GoogleLogin\n\t\t\t\tclientId=\"300709606324-sec60nd2b4hba9b1gkqdcpdlhv2p89kk.apps.googleusercontent.com\"\n\t\t\t\tbuttonText=\"Login\"\n\t\t\t\tonSuccess={this.responseGoogle}\n\t\t\t\tonFailure={this.failGoogle}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap';\nimport { Link, Redirect } from 'react-router-dom';\nimport Login from '../login/Login.js';\nimport auth from '../../services/auth.js'\n\n\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tredirect: false\n\t\t};\n    }\n    \n    logout = () => {\n        auth.signout(() => {\n            this.setState({\n                redirect: true\n            });\n        });\n        \n    }\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to='/' />\n        }\n      }\n\n\trender() {\n\t\treturn (\n            <div>\n                {this.renderRedirect()}\n                <NavDropdown.Item onSelect={this.logout}>\n                    Logout\n                </NavDropdown.Item>\n            </div>\n\t\t);\n\t}\n}\n\n\nfunction NavBar() {\n    return (\n        <Navbar sticky=\"top\">\n            { auth.isAuthenticated \n            ? <Nav defaultActiveKey=\"journal\">\n                <Nav.Link as={Link} eventKey=\"journal\" to={`/journal/${auth.user.id}`}>Journal</Nav.Link> \n                <Nav.Link as={Link} eventKey=\"settings\" to={`/settings/${auth.user.id}`}>Settings</Nav.Link> \n                <NavDropdown title={auth.user.first_name} id=\"user-dropdown\">\n                    <Logout></Logout>\n                </NavDropdown>\n            </Nav>\n            : <Login></Login> }\n        </Navbar>\n    )\n}\n\nexport default NavBar;","import React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport moment from 'moment';\nimport { Row, Col } from 'react-bootstrap';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport axios from 'axios';\nimport config from '../../services/config.js';\nimport { CoffeeLoading } from 'react-loadingg';\n\nfunction Entry(props) {\n\tlet gradient = `linear-gradient(0deg, rgba(${props.endColor.r},${props.endColor.g},${props.endColor.b},1) 0%, rgba(${props.startColor.r},${props.startColor.g},${props.startColor.b},1) 100%)`;\n\t\n\tlet topCornerRadius = props.periodStart ? \"15px\" : \"0px\";\n\tlet bottomCornerRadius = props.periodEnd ? \"15px\" : \"0px\";\n\tlet baseStyle = {\n\t\tbackground: gradient, \n\t\tmarginBottom:\"2px\", \n\t\tpadding:\"15px\", \n\t};\n\n\tlet dateInfoStyle = {\n\t\t...baseStyle,\n\t\tcolor: \"white\", \n\t\tmarginRight:\"2px\", \n\t\tborderTopLeftRadius: topCornerRadius,\n\t\tborderBottomLeftRadius: bottomCornerRadius\n\t}\n\n\tlet entryColStyle = {\n\t\t...baseStyle,\n\t\tbackground: gradient,\n\t\tcolor: \"black\",\n\t\tborderTopRightRadius: topCornerRadius,\n\t\tborderBottomRightRadius: bottomCornerRadius,\n\t\tfontSize: \"20px\"\n\t}\n\n\tlet entryStyle = {\n\t\tbackgroundColor: \"white\", \n\t\tpadding:\"10px\", \n\t\tborderTopRightRadius: topCornerRadius, \n\t\tborderBottomRightRadius: bottomCornerRadius,\n\t\topacity:\"70%\"\n\t};\n\t\n\treturn (\n\t\t<Row>\n\t\t\t<Col md={2} mdOffset={2} sm={2} smOffset={2} style={dateInfoStyle}>\n\t\t\t\t<Row><Col><Moment format=\"YYYY/MM/DD\">{props.data.date}</Moment></Col></Row>\n\t\t\t\t<Row><Col><Moment style={{opacity: \"50%\"}} fromNow>{props.data.date}</Moment></Col></Row>\n\t\t\t</Col>  \n\t\t\t<Col style={entryColStyle}>\n\t\t\t\t<div style={entryStyle}>{props.data.entry}</div>\n\t\t\t</Col>  \n\t\t</Row>\n\t)\n}\n\nclass Entries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tentries: [],\n\t\t\thasMore: true,\n\t\t\tcolor: {\n\t\t\t\tr: 0,\n\t\t\t\tg: 128,\n\t\t\t\tb: 181\n\t\t\t}\n\t\t};\n\t}\n\n\tloadEntries = (pageNum) => {\n\t\tvar perPage = 20;\n\t\taxios.get(`${config.apiHost}/users/${this.props.match.params.userId}/entries/?page=${pageNum}&per_page=${perPage}`)\t\n\t\t\t.then((resp) => {\n\t\t\t\tvar entries = this.state.entries;\n\t\t\t\tvar loadedEntries = resp.data;\n\n\t\t\t\tlet startColor = this.state.color;\n\n\t\t\t\tlet randDiff = (num) => {\n\t\t\t\t\tlet diff = Math.floor(Math.random() * 32);\n\n\t\t\t\t\t// if num = 128\n\t\t\t\t\tlet plusMinusRatio = 1 - (num / 128)\n\n\t\t\t\t\tif (Math.random() < plusMinusRatio) {\n\t\t\t\t\t\treturn num + diff;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn num - diff;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet currentIdx = 0;\n\t\t\t\tloadedEntries.forEach((entry) => {\n\t\t\t\t\tlet endColor = {\n\t\t\t\t\t\tr: randDiff(startColor.r), g: randDiff(startColor.g), b: randDiff(startColor.b)\n\t\t\t\t\t};\n\n\t\t\t\t\tentry.startColor = startColor;\n\t\t\t\t\tentry.endColor = endColor;\n\n\t\t\t\t\tif ((entries.length === 0) || (loadedEntries[currentIdx-1] && loadedEntries[currentIdx-1].periodEnd)) {\n\t\t\t\t\t\tentry.periodStart = true;\n\t\t\t\t\t} \n\t\t\t\t\t\n\t\t\t\t\tif (loadedEntries.length > currentIdx+1) {\n\t\t\t\t\t\tlet nextEntry = loadedEntries[currentIdx+1];\n\t\t\t\t\t\tlet currentMonth = moment(entry.date).month();\n\t\t\t\t\t\tlet nextEntryMonth = moment(nextEntry.date).month();\n\t\t\t\t\t\tif (currentMonth != nextEntryMonth) {\n\t\t\t\t\t\t\tentry.periodEnd = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentIdx++;\n\n\t\t\t\t\tentries.push(entry);\n\n\t\t\t\t\tstartColor = endColor;\n\t\t\t\t});\n\n\t\t\t\tvar hasMore = true;\n\t\t\t\tif (loadedEntries.length < perPage) {\n\t\t\t\t\thasMore = false;\n\t\t\t\t}\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tentries: entries,\n\t\t\t\t\thasMore: hasMore,\n\t\t\t\t\tcolor: startColor\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\trender() {\n\t\tvar items = [];\n\n\t\tthis.state.entries.forEach(entry => {\n\t\t\titems.push(<Entry startColor={entry.startColor} endColor={entry.endColor} key={entry.id} periodStart={entry.periodStart} periodEnd={entry.periodEnd} data={entry}></Entry>);\n\t\t})\n\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t{<CoffeeLoading style={{position: 'relative', left:'50%', marginBottom: \"10px\"}} /> }\n\t\t\t<InfiniteScroll\n\t\t\t\tpageStart={0}\n\t\t\t\tloadMore={this.loadEntries.bind(this)}\n\t\t\t\thasMore={this.state.hasMore}\n\t\t\t\tloader={this.state.entries.length > 0 ? <CoffeeLoading style={{position: 'relative', left:'50%', marginTop:\"20px\"}} /> : null}\n\t\t\t>\n\t\t\t\t{items}\n\t\t\t</InfiniteScroll>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Entries;\n","import React, {Component} from 'react';\nimport {CardElement, injectStripe} from 'react-stripe-elements';\nimport config from '../../../services/config.js';\nimport axios from 'axios';\n\nclass CheckoutForm extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n  }\n\n  async submit(ev) {\n    let {token} = await this.props.stripe.createToken({name: this.props.userId});\n\n    axios.post(`${config.apiHost}/users/${this.props.userId}/subscription`, {\n      \"card_token\": token.id\n    }).then((resp) => {\n      console.log(\"cool\");\n      if (this.props.cb) {\n        this.props.cb();\n      }\n    });\n\n  }\n\n  render() {\n    return (\n      <div className=\"checkout\">\n        <p>Subscribe for <strong>$1.33</strong> per month with a 7-day free trial, cancel anytime</p>\n        <CardElement />\n        <button onClick={this.submit}>Subscribe for $1.33</button>\n      </div>\n    );\n  }\n}\n\nexport default injectStripe(CheckoutForm);\n","import React, { Component } from 'react';\nimport { Row, Col } from 'react-bootstrap';\nimport axios from 'axios';\nimport config from '../../services/config.js';\nimport CheckoutForm from './stripe/CheckoutForm.js';\nimport {Elements} from 'react-stripe-elements';\nimport auth from '../../services/auth.js';\n\nclass Settings extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tphoneNumber: \"\",\n\t\t\tisSubscribed: auth.isSubscribed()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\taxios.get(`${config.apiHost}/users/${this.props.match.params.userId}/`)\n\t\t\t.then((resp) => {\n\t\t\t\tvar phoneNumber = resp.data.phone_number;\n\t\t\t\tthis.setState({\n\t\t\t\t\tphoneNumber: phoneNumber ? phoneNumber : \"\" \n\t\t\t\t});\n\t\t\t});\n\t}\n\t    \n\thandleChange = (event) =>  {\n\t\tthis.setState({\n\t\t\tphoneNumber: event.target.value\n\t\t});\n\t}\n    \n\thandleSubmit = (event) => {\n\t\taxios.put(`${config.apiHost}/users/${this.props.match.params.userId}/`, {\n\t\t\t\"phone_number\": this.state.phoneNumber\n\t\t}).then((resp) => {\n\t\t\talert(\"successfully updated your phone number, congratulations\");\n\t\t});\n\t\tevent.preventDefault();\n\t}\n\n\thandleSubscribe = () => {\n\t\tthis.setState({\n\t\t\tisSubscribed: true\n\t\t});\n\n\t\tauth.user.subscription_id = \"they subbed dont worry about it\";\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t{ this.state.isSubscribed ?\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<label>Phone Number</label>\n\t\t\t\t\t\t\t\t<input type='text' value={this.state.phoneNumber} onChange={this.handleChange} name='phone_number' /> \n\t\t\t\t\t\t\t\t<input type='submit' value='Submit' onClick={this.handleSubmit}/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t:  null\n\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t{ !this.state.isSubscribed ? \n\t\t\t\t\t\t<Elements>\n\t\t\t\t\t\t\t<CheckoutForm userId={this.props.match.params.userId} cb={this.handleSubscribe}/>\n\t\t\t\t\t\t</Elements>\n\t\t\t\t\t\t:  <p>Thanks for subscribing--if you're trying to cancel you'll need to email me: <a href=\"mailto:dailyjournalsubscriptions@gmail.com?Subject=Cancellation\">dailyjournalsubscriptions@gmail.com</a></p>\n\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row> \n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Settings;\n","import React, { Component } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nimport {StripeProvider} from 'react-stripe-elements';\n\nimport PrivateRoute from './components/login/PrivateRoute';\nimport NavBar from './components/nav/NavBar.js';\nimport Entries from './components/pages/Entries.js';\nimport Settings from './components/pages/Settings.js';\nimport './App.css';\nimport config from './services/config';\nimport auth from './services/auth';\n\nclass App extends Component {\n  render() {\n\n    return (\n      <Container>\n        <StripeProvider apiKey={config.stripeKey}>\n          <div>\n              <NavBar></NavBar>\n\n              <PrivateRoute path=\"/journal/:userId\" component={Entries} />\n              <PrivateRoute path=\"/settings/:userId\" component={Settings} />\n\n              { auth.isAuthenticated && auth.isSetUp() ? <Redirect to={`/journal/${auth.user.id}`} /> : \n                auth.isAuthenticated && !auth.isSetUp() ? <Redirect to={`/settings/${auth.user.id}`} /> : \n                null } \n          </div>\n\n        </StripeProvider>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <Router>\n        <App/>\n    </Router>\n, document.getElementById('root'));\n"],"sourceRoot":""}