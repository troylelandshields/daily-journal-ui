{"version":3,"sources":["logo.svg","services/config.js","services/auth.js","components/login/PrivateRoute.js","components/login/Login.js","components/nav/NavBar.js","components/pages/Entries.js","components/pages/stripe/CheckoutForm.js","components/pages/Settings.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","config","apiHost","stripeKey","axios","defaults","headers","common","auth","isAuthenticated","isSubscribed","user","subscription_id","isSetUp","phone_number","authenticate","googleToken","cb","window","localStorage","setItem","get","concat","then","authResponse","data","autoLogin","storedToken","getItem","signout","console","log","removeItem","PrivateRoute","_ref","Component","component","rest","Object","objectWithoutProperties","react_default","a","createElement","Route","assign","render","props","Redirect","to","pathname","state","from","location","Login","redirectToPreviousRoute","responseGoogle","response","tokenId","_this","setState","failGoogle","componentWillMount","this","google_login","clientId","buttonText","onSuccess","onFailure","Logout","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","logout","redirect","renderRedirect","Button","onClick","NavBar","Row","Col","Link","id","NavBar_Logout","login_Login","Entry","md","mdOffset","dist_default","format","date","entry","Entries","loadEntries","pageNum","match","params","userId","resp","entries","loadedEntries","map","push","hasMore","length","items","key","react_infinite_scroller_default","pageStart","loadMore","bind","loader","className","CheckoutForm","submit","assertThisInitialized","ev","stripe","createToken","name","token","post","card_token","_this2","es","injectStripe","Settings","handleChange","event","phoneNumber","target","value","handleSubmit","put","alert","preventDefault","handleSubscribe","type","onChange","href","stripe_CheckoutForm","App","apiKey","Grid","nav_NavBar","login_PrivateRoute","path","ReactDOM","HashRouter","src_App_0","document","getElementById"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,gRCOzBC,EAPA,CAGXC,QAAS,wCACTC,UAAW,oCCDfC,IAAMC,SAASC,QAAQC,OAAvB,OAA0C,mBAE1C,IAAMC,EAAO,CACTC,iBAAiB,EACjBC,aAFS,WAGL,OAAoC,MAA7BF,EAAKG,KAAKC,iBAErBC,QALS,WAML,OAAoC,MAA7BL,EAAKG,KAAKC,iBAAqD,MAA1BJ,EAAKG,KAAKG,cAE1DC,aARS,SAQIC,EAAaC,GACtBb,IAAMC,SAASC,QAAQC,OAAvB,cAAiD,UAAYS,EAE7DE,OAAOC,aAAaC,QAAQ,QAASJ,GAE3CZ,IAAMiB,IAAN,GAAAC,OAAarB,EAAOC,QAApB,iBACCqB,KAAK,SAACC,GACGhB,EAAKC,iBAAkB,EACvBD,EAAKG,KAAOa,EAAaC,KAErBR,GAAIA,OAIhBS,UAtBS,SAsBCT,GACN,IAAMU,EAAcT,OAAOC,aAAaS,QAAQ,SAC5CD,GACAnB,EAAKO,aAAaY,EAAaV,IAGvCY,QA5BS,SA4BDZ,GACJa,QAAQC,IAAI,YACZvB,EAAKC,iBAAkB,EACvBD,EAAKG,KAAO,KACZO,OAAOC,aAAaa,WAAW,SAE3Bf,GAAIA,MAMDT,ICzBAyB,EAZM,SAAAC,GAAA,IAAcC,EAAdD,EAAGE,UAAyBC,EAA5BC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,sBACjBM,EAAAC,EAAAC,cAACC,EAAA,EAADL,OAAAM,OAAA,GAAWP,EAAX,CAAiBQ,OAAQ,SAACC,GAAD,OACI,IAAzBtC,EAAKC,gBACC+B,EAAAC,EAAAC,cAACP,EAAcW,GACfN,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAUC,GAAI,CACZC,SAAU,IACVC,MAAO,CAAEC,KAAML,EAAMM,8DCyCtBC,6MA3CdH,MAAQ,CACPI,yBAAyB,KAG1BC,eAAiB,SAACC,GACjBhD,EAAKO,aAAayC,EAASC,QAAS,WACnCC,EAAKC,SAAS,CAAEL,yBAAyB,SAI3CM,WAAa,SAACJ,GACb1B,QAAQC,IAAI,eAAgByB,GAC5BpD,IAAMC,SAASC,QAAQC,OAAvB,cAAiD,QAGlDsD,mBAAqB,WACpBrD,EAAKkB,UAAU,WACdgC,EAAKC,SAAS,CAAEL,yBAAyB,+EAW1C,OAFoCQ,KAAKZ,MAAjCI,wBAGCd,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAUC,GAJN,MAQZR,EAAAC,EAAAC,cAACqB,EAAA,YAAD,CACCC,SAAS,2EACTC,WAAW,QACXC,UAAWJ,KAAKP,eAChBY,UAAWL,KAAKF,oBAtCAzB,aCHdiC,cACL,SAAAA,EAAYtB,GAAO,IAAAY,EAAA,OAAApB,OAAA+B,EAAA,EAAA/B,CAAAwB,KAAAM,IAClBV,EAAApB,OAAAgC,EAAA,EAAAhC,CAAAwB,KAAAxB,OAAAiC,EAAA,EAAAjC,CAAA8B,GAAAI,KAAAV,KAAMhB,KAMJ2B,OAAS,WACLjE,EAAKqB,QAAQ,WACT6B,EAAKC,SAAS,CACVe,UAAU,OAVNhB,EAgBhBiB,eAAiB,WACb,GAAIjB,EAAKR,MAAMwB,SACX,OAAOlC,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAUC,GAAG,OAhB9BU,EAAKR,MAAQ,CACZwB,UAAU,GAHOhB,wEAuBlB,OACUlB,EAAAC,EAAAC,cAAA,WACKoB,KAAKa,iBACNnC,EAAAC,EAAAC,cAACkC,EAAA,EAAD,CAAQC,QAASf,KAAKW,QAAtB,kBA3BKtC,aA6DN2C,MAzBf,WACI,OACItC,EAAAC,EAAAC,cAACqC,EAAA,EAAD,KACIvC,EAAAC,EAAAC,cAACsC,EAAA,EAAD,KACMxE,EAAKC,gBACD+B,EAAAC,EAAAC,cAACuC,EAAA,EAAD,CAAMjC,GAAE,YAAA1B,OAAcd,EAAKG,KAAKuE,KAAhC,WACA,MAEV1C,EAAAC,EAAAC,cAACsC,EAAA,EAAD,KACMxE,EAAKC,gBACD+B,EAAAC,EAAAC,cAACuC,EAAA,EAAD,CAAMjC,GAAE,aAAA1B,OAAed,EAAKG,KAAKuE,KAAjC,YACA,MAEV1C,EAAAC,EAAAC,cAACsC,EAAA,EAAD,KACMxE,EAAKC,gBACD+B,EAAAC,EAAAC,cAACyC,EAAD,MACA,MAEV3C,EAAAC,EAAAC,cAACsC,EAAA,EAAD,KACIxC,EAAAC,EAAAC,cAAC0C,EAAD,2CCxDhB,SAASC,EAAMvC,GACd,OACCN,EAAAC,EAAAC,cAACqC,EAAA,EAAD,KACCvC,EAAAC,EAAAC,cAACsC,EAAA,EAAD,CAAKM,GAAI,EAAGC,SAAU,GACrB/C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAQgD,OAAO,cAAc3C,EAAMrB,KAAKiE,OAEzClD,EAAAC,EAAAC,cAACsC,EAAA,EAAD,CAAKM,GAAI,EAAGC,SAAU,GACpBzC,EAAMrB,KAAKkE,YA4DDC,cArDd,SAAAA,EAAY9C,GAAO,IAAAY,EAAA,OAAApB,OAAA+B,EAAA,EAAA/B,CAAAwB,KAAA8B,IAClBlC,EAAApB,OAAAgC,EAAA,EAAAhC,CAAAwB,KAAAxB,OAAAiC,EAAA,EAAAjC,CAAAsD,GAAApB,KAAAV,KAAMhB,KAOP+C,YAAc,SAACC,GAEd1F,IAAMiB,IAAN,GAAAC,OAAarB,EAAOC,QAApB,WAAAoB,OAAqCoC,EAAKZ,MAAMiD,MAAMC,OAAOC,OAA7D,mBAAA3E,OAAqFwE,EAArF,cAAAxE,OADc,KAEZC,KAAK,SAAC2E,GACN,IAAIC,EAAUzC,EAAKR,MAAMiD,QACrBC,EAAgBF,EAAKzE,KAEzB2E,EAAcC,IAAI,SAACV,GAClBQ,EAAQG,KAAKX,KAGd,IAAIY,GAAU,EACVH,EAAcI,OAXN,KAYXD,GAAU,GAGX7C,EAAKC,SAAS,CACbwC,QAASA,EACTI,QAASA,OAxBZ7C,EAAKR,MAAQ,CACZiD,QAAS,GACTI,SAAS,GAJQ7C,wEAgClB,IAAI+C,EAAQ,GAOZ,OALA3C,KAAKZ,MAAMiD,QAAQE,IAAI,SAAAV,GACtBc,EAAMH,KAAK9D,EAAAC,EAAAC,cAAC2C,EAAD,CAAOqB,IAAKf,EAAMT,GAAIzD,KAAMkE,OAKvCnD,EAAAC,EAAAC,cAACiE,EAAAlE,EAAD,CACCmE,UAAW,EACXC,SAAU/C,KAAK+B,YAAYiB,KAAKhD,MAChCyC,QAASzC,KAAKZ,MAAMqD,QACpBQ,OAAQvE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,SAASN,IAAK,GAA7B,gBAEPD,UA/CiBtE,8CCdhB8E,cACJ,SAAAA,EAAYnE,GAAO,IAAAY,EAAA,OAAApB,OAAA+B,EAAA,EAAA/B,CAAAwB,KAAAmD,IACjBvD,EAAApB,OAAAgC,EAAA,EAAAhC,CAAAwB,KAAAxB,OAAAiC,EAAA,EAAAjC,CAAA2E,GAAAzC,KAAAV,KAAMhB,KACDoE,OAASxD,EAAKwD,OAAOJ,KAAZxE,OAAA6E,EAAA,EAAA7E,QAAA6E,EAAA,EAAA7E,CAAAoB,KAFGA,8GAKN0D,kGACStD,KAAKhB,MAAMuE,OAAOC,YAAY,CAACC,KAAMzD,KAAKhB,MAAMmD,yBAA/DuB,UAELpH,IAAMqH,KAAN,GAAAnG,OAAcrB,EAAOC,QAArB,WAAAoB,OAAsCwC,KAAKhB,MAAMmD,OAAjD,iBAAwE,CACtEyB,WAAcF,EAAMtC,KACnB3D,KAAK,SAAC2E,GACPpE,QAAQC,IAAI,QACR4F,EAAK7E,MAAM7B,IACb0G,EAAK7E,MAAM7B,2IAOf,OACEuB,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,YACbxE,EAAAC,EAAAC,cAAA,0BAAiBF,EAAAC,EAAAC,cAAA,oBAAjB,8BACAF,EAAAC,EAAAC,cAACkF,EAAA,YAAD,MACApF,EAAAC,EAAAC,cAAA,UAAQmC,QAASf,KAAKoD,QAAtB,4BAzBmB/E,aA+BZ0F,yBAAaZ,GCgDba,cA1Ed,SAAAA,EAAYhF,GAAO,IAAAY,EAAA,OAAApB,OAAA+B,EAAA,EAAA/B,CAAAwB,KAAAgE,IAClBpE,EAAApB,OAAAgC,EAAA,EAAAhC,CAAAwB,KAAAxB,OAAAiC,EAAA,EAAAjC,CAAAwF,GAAAtD,KAAAV,KAAMhB,KAiBPiF,aAAe,SAACC,GACftE,EAAKC,SAAS,CACbsE,YAAaD,EAAME,OAAOC,SApBTzE,EAwBnB0E,aAAe,SAACJ,GACf5H,IAAMiI,IAAN,GAAA/G,OAAarB,EAAOC,QAApB,WAAAoB,OAAqCoC,EAAKZ,MAAMiD,MAAMC,OAAOC,OAA7D,KAAwE,CACvEnF,aAAgB4C,EAAKR,MAAM+E,cACzB1G,KAAK,SAAC2E,GACRoC,MAAM,6DAEPN,EAAMO,kBA9BY7E,EAiCnB8E,gBAAkB,WACjB9E,EAAKC,SAAS,CACbjD,cAAc,IAGfF,EAAKG,KAAKC,gBAAkB,mCApC5B8C,EAAKR,MAAQ,CACZ+E,YAAa,GACbvH,aAAcF,EAAKE,gBAJFgD,mFAQC,IAAAiE,EAAA7D,KACnB1D,IAAMiB,IAAN,GAAAC,OAAarB,EAAOC,QAApB,WAAAoB,OAAqCwC,KAAKhB,MAAMiD,MAAMC,OAAOC,OAA7D,MACE1E,KAAK,SAAC2E,GACN,IAAI+B,EAAc/B,EAAKzE,KAAKX,aAC5B6G,EAAKhE,SAAS,CACbsE,YAAaA,GAA4B,wCA6B5C,OACCzF,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACqC,EAAA,EAAD,KACCvC,EAAAC,EAAAC,cAACsC,EAAA,EAAD,KACElB,KAAKZ,MAAMxC,aACX8B,EAAAC,EAAAC,cAAA,YACCF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,SAAO+F,KAAK,OAAON,MAAOrE,KAAKZ,MAAM+E,YAAaS,SAAU5E,KAAKiE,aAAcR,KAAK,iBACpF/E,EAAAC,EAAAC,cAAA,SAAO+F,KAAK,SAASN,MAAM,SAAStD,QAASf,KAAKsE,gBAEjD,OAML5F,EAAAC,EAAAC,cAACqC,EAAA,EAAD,KACCvC,EAAAC,EAAAC,cAACsC,EAAA,EAAD,KACGlB,KAAKZ,MAAMxC,aAIV8B,EAAAC,EAAAC,cAAA,wFAA+EF,EAAAC,EAAAC,cAAA,KAAGiG,KAAK,mEAAR,wCAHlFnG,EAAAC,EAAAC,cAACkF,EAAA,SAAD,KACCpF,EAAAC,EAAAC,cAACkG,EAAD,CAAc3C,OAAQnC,KAAKhB,MAAMiD,MAAMC,OAAOC,OAAQhF,GAAI6C,KAAK0E,6BA/D/CrG,aC4BR0G,kMArBX,OACErG,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACkF,EAAA,eAAD,CAAgBkB,OAAQ7I,EAAOE,WAC7BqC,EAAAC,EAAAC,cAACqG,EAAA,EAAD,KACIvG,EAAAC,EAAAC,cAACsG,EAAD,MAEAxG,EAAAC,EAAAC,cAACuG,EAAD,CAAcC,KAAK,mBAAmB9G,UAAWwD,IACjDpD,EAAAC,EAAAC,cAACuG,EAAD,CAAcC,KAAK,oBAAoB9G,UAAW0F,IAEhDtH,EAAKC,iBAAmBD,EAAKK,UAAY2B,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAUC,GAAE,YAAA1B,OAAcd,EAAKG,KAAKuE,MAC7E1E,EAAKC,kBAAoBD,EAAKK,UAAY2B,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAUC,GAAE,aAAA1B,OAAed,EAAKG,KAAKuE,MAC/E,eAdE/C,cCJlBgH,IAAStG,OACLL,EAAAC,EAAAC,cAAC0G,EAAA,EAAD,KACI5G,EAAAC,EAAAC,cAAC2G,EAAD,OAENC,SAASC,eAAe","file":"static/js/main.a95e3c49.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","const config = {\n    // apiHost: \"http://localhost:3000\",\n    // stripeKey: \"pk_test_Yptgsj6W2rIreWbKt0mUi2R5\"\n    apiHost: \"https://buffalo-journal.herokuapp.com\",\n    stripeKey: \"pk_live_doxQ9etmZ8nozRk89VmvoOrZ\"\n}\n\nexport default config;","import axios from 'axios';\nimport config from './config.js';\n\naxios.defaults.headers.common['Accept'] = \"application/json\";\n\nconst auth = {\n    isAuthenticated: false,\n    isSubscribed() {\n        return auth.user.subscription_id != null ;\n    },\n    isSetUp() {\n        return auth.user.subscription_id != null && auth.user.phone_number != null;\n    },\n    authenticate(googleToken, cb) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \" + googleToken;\n\n        window.localStorage.setItem(\"token\", googleToken);\n\n\t\taxios.get(`${config.apiHost}/auth/google`)\n\t\t.then((authResponse) => {\n            auth.isAuthenticated = true\n            auth.user = authResponse.data;\n\n            if (cb) cb();\n\t\t});\n        \n    },\n    autoLogin(cb) {\n        const storedToken = window.localStorage.getItem(\"token\");\n        if (storedToken) {\n            auth.authenticate(storedToken, cb);\n        }\n    },\n    signout(cb) {\n        console.log(\"bye now!\");\n        auth.isAuthenticated = false;\n        auth.user = null;\n        window.localStorage.removeItem(\"token\");\n\n        if (cb) cb();\n    }\n}\n\n\n\nexport default auth;","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Route,\n    Redirect,\n} from 'react-router-dom';\nimport auth from '../../services/auth.js';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={(props) => (\n        auth.isAuthenticated === true\n            ? <Component {...props} />\n            : <Redirect to={{\n                pathname: '/',\n                state: { from: props.location }\n            }}\n            />\n    )} />\n);\n\nexport default PrivateRoute;","import React, { Component } from 'react';\nimport {\n\tRoute,\n\tLink,\n\tRedirect,\n\tBrowserRouter as Router,\n  } from 'react-router-dom';\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\nimport axios from 'axios';\nimport auth from '../../services/auth.js';\n\nclass Login extends Component {\n\tstate = {\n\t\tredirectToPreviousRoute: false\n\t};\n\n\tresponseGoogle = (response) => {\n\t\tauth.authenticate(response.tokenId, () => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\tfailGoogle = (response) => {\n\t\tconsole.log(\"login failed\", response);\n\t\taxios.defaults.headers.common['Authorization'] = null;\n\t}\n\n\tcomponentWillMount = () => {\n\t\tauth.autoLogin(() => {\n\t\t\tthis.setState({ redirectToPreviousRoute: true });\n\t\t})\n\t}\n\n\trender() {\n\t\t\n\n\t\t// const { from } = this.props.location.state || { from: { pathname: \"/\" } };\n\t\tconst from = \"/\";\n\t\tconst { redirectToPreviousRoute } = this.state;\n\t\n\t\tif (redirectToPreviousRoute) {\n\t\t  return <Redirect to={from} />;\n\t\t}\n\n\t\treturn (\n\t\t\t<GoogleLogin\n\t\t\t\tclientId=\"300709606324-sec60nd2b4hba9b1gkqdcpdlhv2p89kk.apps.googleusercontent.com\"\n\t\t\t\tbuttonText=\"Login\"\n\t\t\t\tonSuccess={this.responseGoogle}\n\t\t\t\tonFailure={this.failGoogle}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport { Grid, Row, Col, Button } from 'react-bootstrap';\nimport { Link, Redirect } from 'react-router-dom';\nimport Login from '../login/Login.js';\nimport auth from '../../services/auth.js'\n\n\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tredirect: false\n\t\t};\n    }\n    \n    logout = () => {\n        auth.signout(() => {\n            this.setState({\n                redirect: true\n            });\n        });\n        \n    }\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to='/' />\n        }\n      }\n\n\trender() {\n\t\treturn (\n            <div>\n                {this.renderRedirect()}\n                <Button onClick={this.logout}>\n                    Logout\n                </Button>\n            </div>\n\t\t);\n\t}\n}\n\n\nfunction NavBar() {\n    return (\n        <Row>\n            <Col>\n                { auth.isAuthenticated \n                    ? <Link to={`/journal/${auth.user.id}`}>Journal</Link> \n                    : null }\n            </Col>\n            <Col>\n                { auth.isAuthenticated \n                    ? <Link to={`/settings/${auth.user.id}`}>Settings</Link> \n                    : null }\n            </Col>\n            <Col>\n                { auth.isAuthenticated \n                    ? <Logout></Logout> \n                    : null }\n            </Col>\n            <Col>\n                <Login></Login>\n            </Col>\n        </Row>\n    )\n}\n\nexport default NavBar;","import React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport { Row, Col } from 'react-bootstrap';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport axios from 'axios';\nimport config from '../../services/config.js';\n\nfunction Entry(props) {\n\treturn (\n\t\t<Row>\n\t\t\t<Col md={2} mdOffset={2}>\n\t\t\t\t<Moment format=\"YYYY/MM/DD\">{props.data.date}</Moment>\n\t\t\t</Col>  \n\t\t\t<Col md={8} mdOffset={2}>\n\t\t\t\t{props.data.entry}\n\t\t\t</Col>  \n\t\t</Row>\n\t)\n}\n\nclass Entries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tentries: [],\n\t\t\thasMore: true\n\t\t};\n\t}\n\n\tloadEntries = (pageNum) => {\n\t\tvar perPage = 20;\n\t\taxios.get(`${config.apiHost}/users/${this.props.match.params.userId}/entries/?page=${pageNum}&per_page=${perPage}`)\n\t\t\t.then((resp) => {\n\t\t\t\tvar entries = this.state.entries;\n\t\t\t\tvar loadedEntries = resp.data;\n\n\t\t\t\tloadedEntries.map((entry) => {\n\t\t\t\t\tentries.push(entry);\n\t\t\t\t});\n\n\t\t\t\tvar hasMore = true;\n\t\t\t\tif (loadedEntries.length < perPage) {\n\t\t\t\t\thasMore = false;\n\t\t\t\t}\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tentries: entries,\n\t\t\t\t\thasMore: hasMore\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\trender() {\n\t\tvar items = [];\n\n\t\tthis.state.entries.map(entry => {\n\t\t\titems.push(<Entry key={entry.id} data={entry}></Entry>);\n\t\t})\n\n\n\t\treturn (\n\t\t\t<InfiniteScroll\n\t\t\t\tpageStart={0}\n\t\t\t\tloadMore={this.loadEntries.bind(this)}\n\t\t\t\thasMore={this.state.hasMore}\n\t\t\t\tloader={<div className=\"loader\" key={0}>Loading ...</div>}\n\t\t\t>\n\t\t\t\t{items}\n\t\t\t</InfiniteScroll>\n\n\t\t);\n\t}\n}\n\nexport default Entries;\n","import React, {Component} from 'react';\nimport {CardElement, injectStripe} from 'react-stripe-elements';\nimport auth from '../../../services/auth';\nimport config from '../../../services/config.js';\nimport axios from 'axios';\n\nclass CheckoutForm extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n  }\n\n  async submit(ev) {\n    let {token} = await this.props.stripe.createToken({name: this.props.userId});\n\n    axios.post(`${config.apiHost}/users/${this.props.userId}/subscription`, {\n      \"card_token\": token.id\n    }).then((resp) => {\n      console.log(\"cool\");\n      if (this.props.cb) {\n        this.props.cb();\n      }\n    });\n\n  }\n\n  render() {\n    return (\n      <div className=\"checkout\">\n        <p>Subscribe for <strong>$1</strong> per month, cancel anytime</p>\n        <CardElement />\n        <button onClick={this.submit}>Subscribe for $1</button>\n      </div>\n    );\n  }\n}\n\nexport default injectStripe(CheckoutForm);\n","import React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport { Row, Col } from 'react-bootstrap';\n// import { GoogleLogin, GoogleLogout } from 'react-google-login';\nimport axios from 'axios';\nimport config from '../../services/config.js';\nimport CheckoutForm from './stripe/CheckoutForm.js';\nimport {Elements} from 'react-stripe-elements';\nimport auth from '../../services/auth.js';\n\nclass Settings extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tphoneNumber: \"\",\n\t\t\tisSubscribed: auth.isSubscribed()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\taxios.get(`${config.apiHost}/users/${this.props.match.params.userId}/`)\n\t\t\t.then((resp) => {\n\t\t\t\tvar phoneNumber = resp.data.phone_number;\n\t\t\t\tthis.setState({\n\t\t\t\t\tphoneNumber: phoneNumber ? phoneNumber : \"\" \n\t\t\t\t});\n\t\t\t});\n\t}\n\t    \n\thandleChange = (event) =>  {\n\t\tthis.setState({\n\t\t\tphoneNumber: event.target.value\n\t\t});\n\t}\n    \n\thandleSubmit = (event) => {\n\t\taxios.put(`${config.apiHost}/users/${this.props.match.params.userId}/`, {\n\t\t\t\"phone_number\": this.state.phoneNumber\n\t\t}).then((resp) => {\n\t\t\talert(\"successfully updated your phone number, congratulations\");\n\t\t});\n\t\tevent.preventDefault();\n\t}\n\n\thandleSubscribe = () => {\n\t\tthis.setState({\n\t\t\tisSubscribed: true\n\t\t});\n\n\t\tauth.user.subscription_id = \"they subbed dont worry about it\";\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t{ this.state.isSubscribed ?\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<label>Phone Number</label>\n\t\t\t\t\t\t\t\t<input type='text' value={this.state.phoneNumber} onChange={this.handleChange} name='phone_number' /> \n\t\t\t\t\t\t\t\t<input type='submit' value='Submit' onClick={this.handleSubmit}/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t:  null\n\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t{ !this.state.isSubscribed ? \n\t\t\t\t\t\t<Elements>\n\t\t\t\t\t\t\t<CheckoutForm userId={this.props.match.params.userId} cb={this.handleSubscribe}/>\n\t\t\t\t\t\t</Elements>\n\t\t\t\t\t\t:  <p>Thanks for subscribing--if you're trying to cancel you'll need to email me: <a href=\"mailto:dailyjournalsubscriptions@gmail.com?Subject=Cancellation\">dailyjournalsubscriptions@gmail.com</a></p>\n\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row> \n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Settings;\n","import React, { Component } from 'react';\nimport { Grid, Row, Col, Button } from 'react-bootstrap';\nimport { Route, Link, Redirect } from 'react-router-dom';\nimport {StripeProvider} from 'react-stripe-elements';\n\nimport PrivateRoute from './components/login/PrivateRoute';\nimport NavBar from './components/nav/NavBar.js';\nimport Entries from './components/pages/Entries.js';\nimport Settings from './components/pages/Settings.js';\nimport logo from './logo.svg';\nimport './App.css';\nimport config from './services/config';\nimport auth from './services/auth';\n\nclass App extends Component {\n  render() {\n\n    return (\n      <div>\n        <StripeProvider apiKey={config.stripeKey}>\n          <Grid>\n              <NavBar></NavBar>\n\n              <PrivateRoute path=\"/journal/:userId\" component={Entries} />\n              <PrivateRoute path=\"/settings/:userId\" component={Settings} />\n\n              { auth.isAuthenticated && auth.isSetUp() ? <Redirect to={`/journal/${auth.user.id}`} /> : \n                auth.isAuthenticated && !auth.isSetUp() ? <Redirect to={`/settings/${auth.user.id}`} /> : \n                null } \n\n          </Grid>\n\n        </StripeProvider>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport Popper from 'popper.js';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>\n, document.getElementById('root'));\n"],"sourceRoot":""}