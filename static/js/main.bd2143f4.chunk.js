(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){e.exports=a(220)},138:function(e,t,a){},216:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var n=a(12),r=(a(130),a(132),a(0)),o=a.n(r),c=a(25),i=a.n(c),l=a(235),s=(a(138),a(11)),u=a(16),m=a(19),p=a(14),d=a(17),b=a(47),h=a(229),f=a(233),g=a(33),E=a(125),v=a(234),y=a(2),k=a.n(y),j=a(5),O=a(10),x=a.n(O),S={apiHost:"https://buffalo-journal.herokuapp.com",stripeKey:"pk_live_doxQ9etmZ8nozRk89VmvoOrZ"};x.a.defaults.headers.common.Accept="application/json";var w=function(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)({}),i=Object(n.a)(c,2),l=i[0],s=i[1],u=Object(r.useMemo)(function(){return null!=l.subscription_id},[l]),m=Object(r.useMemo)(function(){return null!=l.subscription_id&&null!=l.phone_number},[l]),p=function(e,t){x.a.defaults.headers.common.Authorization="Bearer "+e,x.a.defaults.headers.common["X-Dumb-Authorization"]="Bearer "+e,window.localStorage.setItem("token",e),x.a.get("".concat(S.apiHost,"/auth/google")).then(function(e){s(e.data),o(!0),t&&t()})},d=function(){var e=Object(j.a)(k.a.mark(function e(t,a){var n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x.a.defaults.headers.common.Authorization="Bearer "+t,x.a.defaults.headers.common["X-Dumb-Authorization"]="Bearer "+t,e.next=4,x.a.get("".concat(S.apiHost,"/auth/auth0"));case 4:n=e.sent,s(n.data),o(!0),a&&a();case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(k.a.mark(function e(t,a,n){var r,o,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=window.localStorage.getItem("token"),o=window.localStorage.getItem("authProvider")||"google",!t&&"auth0"!==o){e.next=11;break}if(r){e.next=9;break}return e.next=6,a();case 6:c=e.sent,window.localStorage.setItem("token",c),window.localStorage.setItem("authProvider","auth0");case 9:return d(r,n),e.abrupt("return");case 11:r?p(r,n):n&&n();case 12:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),h=function(e){console.log("bye now!"),o(!1),s({}),window.localStorage.removeItem("token"),window.localStorage.removeItem("authProvider"),e&&e()};return Object(r.useMemo)(function(){return{isAuthenticated:a,user:l,isSubscribed:u,isSetUp:m,authenticate:p,authenticateAuth0:d,autoLogin:b,signout:h}},[a,l,u,m])},C=Object(r.createContext)(),M=function(e){var t=e.component,a=Object(E.a)(e,["component"]),n=Object(r.useContext)(C);return o.a.createElement(f.a,Object.assign({},a,{render:function(e){return!0===n.isAuthenticated?o.a.createElement(t,e):o.a.createElement(v.a,{to:{pathname:"/",state:{from:e.location.pathname}}})}}))},A=a(230),P=a(231),_=a(232),I=a(226),D=a(73),L=a(48),T=function(){var e=Object(L.b)().loginWithRedirect,t=Object(r.useState)(""),a=Object(n.a)(t,2),c=a[0],i=a[1],l=Object(r.useContext)(C);Object(r.useEffect)(function(){l.isAuthenticated&&l.isSetUp?i("/journal/".concat(l.user.id)):l.isAuthenticated&&!l.isSetUp&&i("/settings/".concat(l.user.id))},[l,l.isAuthenticated]);var s=function(){var t=Object(j.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return c?o.a.createElement(v.a,{to:c}):!l.isAuthenticated&&o.a.createElement(o.a.Fragment,null,o.a.createElement(D.GoogleLogin,{clientId:"300709606324-sec60nd2b4hba9b1gkqdcpdlhv2p89kk.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(e){l.authenticate(e.tokenId)},onFailure:function(e){console.log("login failed",e),x.a.defaults.headers.common.Authorization=null}}),o.a.createElement("br",null),o.a.createElement("button",{onClick:s},"Login"))};function R(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],c=t[1],i=Object(r.useContext)(C);return o.a.createElement("div",null,function(){if(a)return o.a.createElement(v.a,{to:"/"})}(),o.a.createElement(A.a.Item,{onSelect:function(){i.signout(function(){c(!0)})}},"Logout"))}var U=function(e){var t=function(e){if(!e)return null;var t=e.split("/"),a=t.indexOf("public");return-1===a?null:t[a+1]}(e.location),a=Object(r.useState)(null),c=Object(n.a)(a,2),i=c[0],l=c[1],s=Object(r.useContext)(C);return Object(r.useEffect)(function(){t&&!i&&x.a.get("".concat(S.apiHost,"/public/").concat(t,"/")).then(function(e){l(e.data)})},[t]),o.a.createElement(P.a,{sticky:"top"},o.a.createElement(o.a.Fragment,null,!t&&s.isAuthenticated?o.a.createElement(_.a,null,o.a.createElement(A.a,{title:"Monthly",id:"summaries-dropdown"},o.a.createElement(_.a.Link,{as:I.a,eventKey:"overviews",to:"/summaries/".concat(s.user.id,"/default")},"Overviews"),o.a.createElement(_.a.Link,{as:I.a,eventKey:"haikus",to:"/summaries/".concat(s.user.id,"/haiku")},"Haikus"),o.a.createElement(_.a.Link,{as:I.a,eventKey:"poetry",to:"/summaries/".concat(s.user.id,"/poetry")},"Poems")),o.a.createElement(_.a.Link,{as:I.a,eventKey:"journal",to:"/journal/".concat(s.user.id)},"Journal"),o.a.createElement(_.a.Link,{as:I.a,eventKey:"settings",to:"/settings/".concat(s.user.id)},"Settings"),o.a.createElement(A.a,{title:s.user.first_name,id:"user-dropdown"},o.a.createElement(R,null))):t&&i?o.a.createElement(_.a,null,o.a.createElement(A.a,{title:"".concat(i.first_name,"'s Months"),id:"public-summaries-dropdown"},o.a.createElement(_.a.Link,{as:I.a,eventKey:"public-overviews",to:"/public/".concat(t,"/summaries/default")},"Public Overviews"),o.a.createElement(_.a.Link,{as:I.a,eventKey:"public-haikus",to:"/public/".concat(t,"/summaries/haiku")},"Public Haikus"),o.a.createElement(_.a.Link,{as:I.a,eventKey:"public-poetry",to:"/public/".concat(t,"/summaries/poetry")},"Public Poems")),o.a.createElement(_.a.Link,{as:I.a,eventKey:"public-journal",to:"/public/".concat(t,"/journal")},"Public Journal"),o.a.createElement(_.a.Link,{as:I.a,eventKey:"public-signin",to:"/"},s.isAuthenticated?"Mine":"Sign Up")):null))},H=a(28),B=a(43),z=a.n(B),F=a(46),K=a.n(F),Y=a(227),N=a(228),J=a(60),W=a.n(J),Z=a(34),X=a(35),$=a(36);function q(e){var t={position:"relative",left:"4px",top:"4px",color:"rgba(".concat(e.color.r,",").concat(e.color.g,",").concat(e.color.b,",0.1)"),":hover":{color:"rgba(".concat(e.color.r,",").concat(e.color.g,",").concat(e.color.b,",0.4)")}},a={cursor:"pointer",":hover":{color:"rgba(".concat(e.color.r,",").concat(e.color.g,",").concat(e.color.b,",1)")}},n=function(){var t=Object(j.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.delete(e.entryUrl);case 3:e.handleDelete&&e.handleDelete(e.entryId),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(){return t.apply(this,arguments)}}();return o.a.createElement("div",{style:t},o.a.createElement("div",null,o.a.createElement("div",{key:"trash".concat(e.entryId),className:"trash",style:a},o.a.createElement("a",{onClick:n},o.a.createElement(X.a,{icon:$.c})))))}function G(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),c=a[0],i=a[1],l="linear-gradient(0deg, rgba(".concat(e.endColor.r,",").concat(e.endColor.g,",").concat(e.endColor.b,",1) 0%, rgba(").concat(e.startColor.r,",").concat(e.startColor.g,",").concat(e.startColor.b,",1) 100%)"),s=e.periodStart?"15px":"0px",u=e.periodEnd?"15px":"0px",m={background:l,marginBottom:"2px",padding:"15px"},p=Object(H.a)({},m,{color:"white",marginRight:"2px",borderTopLeftRadius:s,borderBottomLeftRadius:u}),d=Object(H.a)({},m,{background:l,color:"black",borderTopRightRadius:s,borderBottomRightRadius:u,fontSize:"20px"}),b={backgroundColor:"white",padding:"10px",borderTopRightRadius:s,borderBottomRightRadius:u,opacity:"70%"};return c?null:o.a.createElement(Y.a,null,o.a.createElement(N.a,{md:2,mdOffset:2,sm:2,smOffset:2,style:p},o.a.createElement(Y.a,null,o.a.createElement(N.a,null,o.a.createElement(z.a,{format:"YYYY/MM/DD"},e.data.date))),o.a.createElement(Y.a,null,o.a.createElement(N.a,null,o.a.createElement(z.a,{style:{opacity:"50%"},format:"dddd"},e.data.date))),o.a.createElement(Y.a,null,o.a.createElement(N.a,null,o.a.createElement(z.a,{style:{opacity:"50%"},fromNow:!0},e.data.date)))),o.a.createElement(N.a,{style:d},o.a.createElement("div",{style:b},e.data.entry)),!e.isPublic&&o.a.createElement(q,{entryId:e.data.id,entryUrl:e.data.selfUrl,color:e.startColor,handleDelete:function(){i(!0)}}))}q=Object(b.a)(q);var Q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).loadUser=function(){x.a.get("".concat(S.apiHost,"/public/").concat(a.props.match.params.userId,"/")).then(function(e){a.setState({publicUser:e.data})})},a.loadEntries=function(e){var t=a.state.isDesc?"DESC":"ASC";x.a.get("".concat(a.url,"?page=").concat(e,"&per_page=").concat(20,"&order=").concat(t)).then(function(e){var t=a.state.entries,n=e.data,r=a.state.color,o=function(e){var t=Math.floor(32*Math.random()),a=1-e/128;return Math.random()<a?e+t:e-t},c=0;n.forEach(function(e){e.selfUrl="".concat(S.apiHost,"/users/").concat(a.props.match.params.userId,"/entries/").concat(e.id);var i={r:o(r.r),g:o(r.g),b:o(r.b)};if(e.startColor=r,e.endColor=i,(0===t.length||n[c-1]&&n[c-1].periodEnd)&&(e.periodStart=!0),n.length>c+1){var l=n[c+1];K()(e.date).month()!=K()(l.date).month()&&(e.periodEnd=!0)}c++,t.push(e),r=i});var i=!0;n.length<20&&(i=!1),a.setState({entries:t,hasMore:i,color:r})})},a.isPublic=a.props.location.pathname.includes("public"),a.url=a.isPublic?"".concat(S.apiHost,"/public/").concat(a.props.match.params.userId,"/entries/"):"".concat(S.apiHost,"/users/").concat(a.props.match.params.userId,"/entries/"),a.state={isDesc:"ASC"!==a.props.match.params.order,entries:[],publicUser:null,hasMore:!0,color:{r:0,g:128,b:181}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.isPublic&&this.loadUser()}},{key:"render",value:function(){var e=this,t=[];return this.state.entries.forEach(function(a){t.push(o.a.createElement(G,{isPublic:e.isPublic,startColor:a.startColor,endColor:a.endColor,key:a.id,periodStart:a.periodStart,periodEnd:a.periodEnd,data:a}))}),o.a.createElement("div",{key:this.state.isDesc},o.a.createElement(Z.CoffeeLoading,{style:{position:"relative",left:"50%",marginBottom:"10px"}}),this.isPublic?this.state.publicUser&&this.state.publicUser.first_name&&o.a.createElement("h3",{style:{textAlign:"center",fontFamily:"'Playfair Display', serif",opacity:"70%"}},"Today, ",this.state.publicUser.first_name," ",this.state.publicUser.last_name,"..."):o.a.createElement("h3",{style:{textAlign:"center",fontFamily:"'Playfair Display', serif",opacity:"70%"}},"Today, I..."),o.a.createElement("a",{style:{position:"relative",left:"50%",marginBottom:"10px"},onClick:function(){return e.setState({isDesc:!e.state.isDesc,entries:[],hasMore:!0})}},this.state.isDesc?o.a.createElement(X.a,{icon:$.a}):o.a.createElement(X.a,{icon:$.b})),o.a.createElement(W.a,{pageStart:0,loadMore:this.loadEntries.bind(this),hasMore:this.state.hasMore,loader:o.a.createElement(Z.LoopCircleLoading,{size:"small",style:{position:"relative",left:"50%",marginTop:"20px"}})},t))}}]),t}(r.Component),V=a(39),ee=a(13),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).submit=a.submit.bind(Object(ee.a)(Object(ee.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"submit",value:function(){var e=Object(j.a)(k.a.mark(function e(t){var a,n,r=this;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.stripe.createToken({name:this.props.userId});case 2:a=e.sent,n=a.token,x.a.post("".concat(S.apiHost,"/users/").concat(this.props.userId,"/subscription"),{card_token:n.id}).then(function(e){r.props.cb&&r.props.cb()});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"checkout"},o.a.createElement("p",null,"Subscribe for ",o.a.createElement("strong",null,"$24")," per year with a 14-day free trial, cancel anytime"),o.a.createElement(g.CardElement,null),o.a.createElement("button",{onClick:this.submit},"Subscribe for $24"))}}]),t}(r.Component),ae=Object(g.injectStripe)(te),ne=a(65);function re(e){if(!e.days)return null;var t=Object(r.useState)(parseInt(e.days,2)),a=Object(n.a)(t,2),c=a[0],i=a[1];var l=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],s=[{start:"rgb(128, 0, 181)",end:"rgb(128, 0, 181)"},{start:"rgb(128, 0, 181)",end:"rgb(85, 0, 181)"},{start:"rgb(85, 0, 181)",end:"rgb(85, 10, 109)"},{start:"rgb(85, 10, 109)",end:"rgb(101, 20, 80"},{start:"rgb(101, 20, 80)",end:"rgb(101, 60, 30)"},{start:"rgb(101, 60, 30)",end:"rgb(40, 110, 50)"},{start:"rgb(40, 110, 50)",end:"rgb(10, 140, 90)"}];return o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"300px"}},l.map(function(t,a){return o.a.createElement("button",{id:"day-".concat(a,"-").concat(s[a].start),key:a,style:{background:c&1<<a?"linear-gradient(to right, ".concat(s[a].start,", ").concat(s[a].end,")"):"white",color:c&1<<a?"white":"black",border:"none",padding:"5px 10px",borderRadius:0===a?"25px 0 0 25px":a===l.length-1?"0 25px 25px 0":"none"},onClick:function(t){t.preventDefault(),function(t){var a=1<<t;i(function(e){return e^a}),e.handleChange&&e.handleChange((c^a).toString(2).padStart(7,"0"))}(a)}},t)}))}var oe=function(e){var t=Object(r.useContext)(C),a=Object(r.useState)({}),c=Object(n.a)(a,2),i=c[0],l=c[1],s=Object(r.useState)(t.isSubscribed),u=Object(n.a)(s,2),m=u[0],p=u[1];Object(r.useEffect)(function(){x.a.get("".concat(S.apiHost,"/users/").concat(e.match.params.userId,"/")).then(function(e){l({days_of_week:e.data.days_of_week,phone_number:e.data.phone_number,send_hour:e.data.send_hour,time_zone:e.data.time_zone,prompt:e.data.prompt})})},[e.match.params.userId]);var d=function(e,t){l(Object(H.a)({},i,Object(V.a)({},e,t)))};return o.a.createElement("div",null,o.a.createElement(Y.a,null,o.a.createElement(N.a,null,m?o.a.createElement("form",{className:""},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("label",{style:{textAlign:"center",fontStyle:"bold",fontFamily:"'Playfair Display', serif",opacity:"100%"}},"Phone Number")),o.a.createElement("td",null,o.a.createElement("input",{style:{border:"none",padding:"5px",marginLeft:"8px",background:"linear-gradient(to right, rgb(0, 128, 181), rgb(128, 0, 181))",color:"white"},type:"text",value:i.phone_number,onChange:function(e){return d(e.target.name,e.target.value)},name:"phone_number"}))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("label",{style:{textAlign:"center",fontStyle:"bold",fontFamily:"'Playfair Display', serif",opacity:"100%"}},"Custom Message")),o.a.createElement("td",null,o.a.createElement("input",{style:{border:"none",padding:"5px",marginLeft:"8px",background:"linear-gradient(to right, rgb(0, 128, 181), rgb(128, 0, 181))",color:"white"},type:"text",value:i.prompt,onChange:function(e){return d(e.target.name,e.target.value)},name:"prompt"}))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("label",{style:{textAlign:"center",fontStyle:"bold",fontFamily:"'Playfair Display', serif",opacity:"100%"}},"Send Hour")),o.a.createElement("td",null,o.a.createElement("select",{id:"hour",style:{width:"22%",border:"none",padding:"5px",marginLeft:"8px",background:"linear-gradient(to right, rgb(0, 128, 181), rgb(128, 0, 181))",color:"white"},type:"text",value:i.send_hour,onChange:function(e){return d(e.target.name,parseInt(e.target.value))},name:"send_hour"},o.a.createElement("option",{value:""},"Choose an hour"),o.a.createElement("option",{value:"6"},"6 AM"),o.a.createElement("option",{value:"7"},"7 AM"),o.a.createElement("option",{value:"8"},"8 AM"),o.a.createElement("option",{value:"9"},"9 AM"),o.a.createElement("option",{value:"10"},"10 AM"),o.a.createElement("option",{value:"11"},"11 AM"),o.a.createElement("option",{value:"12"},"12 PM"),o.a.createElement("option",{value:"13"},"1 PM"),o.a.createElement("option",{value:"14"},"2 PM"),o.a.createElement("option",{value:"15"},"3 PM"),o.a.createElement("option",{value:"16"},"4 PM"),o.a.createElement("option",{value:"17"},"5 PM"),o.a.createElement("option",{value:"18"},"6 PM"),o.a.createElement("option",{value:"19"},"7 PM"),o.a.createElement("option",{value:"20"},"8 PM"),o.a.createElement("option",{value:"21"},"9 PM"),o.a.createElement("option",{value:"22"},"10 PM"),o.a.createElement("option",{value:"23"},"11 PM")),o.a.createElement("select",{id:"timezone",value:i.time_zone,style:{maxWidth:"27%",border:"none",padding:"5px",background:"linear-gradient(to right, rgb(128, 0, 181), rgb(101, 20, 80)",color:"white"},name:"send_hour",onChange:function(e){return d(e.target.name,parseInt(e.target.value))}},o.a.createElement("option",{value:"America/New_York"},"Eastern Time (ET)"),o.a.createElement("option",{value:"America/Chicago"},"Central Time (CT)"),o.a.createElement("option",{value:"America/Denver"},"Mountain Time (MT)"),o.a.createElement("option",{value:"America/Phoenix"},"Arizona Time"),o.a.createElement("option",{value:"America/Los_Angeles"},"Pacific Time (PT)"),o.a.createElement("option",{value:"America/Anchorage"},"Alaska Time (AKT)"),o.a.createElement("option",{value:"America/Adak"},"Hawaii-Aleutian Time (HAT)")))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("label",{style:{textAlign:"center",fontStyle:"bold",fontFamily:"'Playfair Display', serif",opacity:"100%"}},"Send on Days")),o.a.createElement("td",null,o.a.createElement(re,{days:i.days_of_week,handleChange:function(e){return d("days_of_week",e)}}))))),o.a.createElement("p",null,o.a.createElement("input",{style:{background:"none",border:"1px solid #cccccc",borderRadius:"8px"},onMouseOver:function(e){return e.target.style.border="1px solid #888888"},onMouseOut:function(e){return e.target.style.border="1px solid #cccccc"},type:"submit",value:"Save",onClick:function(t){t.preventDefault(),x.a.put("".concat(S.apiHost,"/users/").concat(e.match.params.userId,"/"),i).then(function(e){ne.b.success("Success!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})}}))):null)),o.a.createElement(Y.a,null,o.a.createElement(N.a,null,!m&&o.a.createElement(g.Elements,null,o.a.createElement(ae,{userId:e.match.params.userId,cb:function(){p(!0),t.user.subscription_id="they subbed dont worry about it"}})))),o.a.createElement(Y.a,null,o.a.createElement(N.a,null,o.a.createElement("a",{href:"https://portal.todayi.page/p/login/8wM9B80PK3I78PSbII",target:"_blank"},"Manage Subscription"))))};var ce=function(e){return o.a.createElement("div",null,"Welcome!",o.a.createElement(T,null))};a(215);function ie(e){var t=Object(r.useState)({}),a=Object(n.a)(t,2),c=(a[0],a[1],"linear-gradient(0deg, rgba(".concat(e.endColor.r,",").concat(e.endColor.g,",").concat(e.endColor.b,",1) 0%, rgba(").concat(e.startColor.r,",").concat(e.startColor.g,",").concat(e.startColor.b,",1) 100%)")),i=e.periodStart?"15px":"0px",l=e.periodEnd?"15px":"0px",s={background:c,marginBottom:"2px",padding:"15px"},u=Object(H.a)({},s,{color:"white",marginRight:"2px",borderTopLeftRadius:i,borderBottomLeftRadius:l}),m=Object(H.a)({},s,{background:c,color:"black",borderTopRightRadius:i,borderBottomRightRadius:l,fontSize:"20px"}),p={whiteSpace:"pre-wrap",backgroundColor:"white",padding:"10px",borderTopRightRadius:i,borderBottomRightRadius:l,opacity:"70%"};return o.a.createElement(Y.a,null,o.a.createElement(N.a,{md:2,mdOffset:2,sm:2,smOffset:2,style:u},o.a.createElement(Y.a,null,o.a.createElement(N.a,null,o.a.createElement(z.a,{format:"MMM YYYY"},e.data.start_date)))),o.a.createElement(N.a,{style:m},e.data.summary?o.a.createElement("div",{style:p},e.data.summary.trim()):o.a.createElement(Z.CoffeeLoading,null)))}var le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).loadSummaries=function(){var e=Object(j.a)(k.a.mark(function e(t){var n,r,o,c,i,l,s,u;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=1,r=a.state.isDesc?"DESC":"ASC",e.next=4,x.a.get("".concat(a.url,"?page=").concat(t,"&per_page=").concat(n,"&style=").concat(a.props.match.params.style,"&order=").concat(r));case 4:o=e.sent,c=a.state.summaries,i=o.data,l=a.state.color,s=function(e){var t=Math.floor(32*Math.random()),a=1-e/128;return Math.random()<a?e+t:e-t},i.forEach(function(e){if("00000000-0000-0000-0000-000000000000"!==e.id){var t={r:s(l.r),g:s(l.g),b:s(l.b)};e.startColor=l,e.endColor=t,l=t,c.push(e)}}),u=!0,i.length<n&&(u=!1),a.setState({summaries:c,hasMore:u,color:l});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadUser=function(){x.a.get("".concat(S.apiHost,"/public/").concat(a.props.match.params.userId,"/")).then(function(e){a.setState({publicUser:e.data})})},a.isPublic=a.props.location.pathname.includes("public"),a.url=a.isPublic?"".concat(S.apiHost,"/public/").concat(a.props.match.params.userId,"/summaries/").concat(a.props.match.params.style):"".concat(S.apiHost,"/users/").concat(a.props.match.params.userId,"/summaries/"),a.state={summaries:[],isDesc:"ASC"!==a.props.match.params.order,hasMore:!0,publicUser:null,color:{r:128,g:0,b:181}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){e.match.params.style!==this.props.match.params.style&&this.setState({summaries:[],hasMore:!0})}},{key:"componentDidMount",value:function(){this.isPublic&&this.loadUser()}},{key:"render",value:function(){var e=this,t=[];return this.state.summaries.forEach(function(a){t.push(o.a.createElement(ie,{startColor:a.startColor,endColor:a.endColor,key:e.props.match.params.style+a.start_date+a.id,periodStart:!0,periodEnd:!0,data:a}))}),o.a.createElement("div",{key:this.props.match.params.style+this.state.isDesc},o.a.createElement(Z.CoffeeLoading,{style:{position:"relative",left:"50%",marginBottom:"10px"}}),this.isPublic?this.state.publicUser&&this.state.publicUser.first_name?o.a.createElement("h3",{style:{textAlign:"center",fontFamily:"'Playfair Display', serif",opacity:"70%"}},"This month, ",this.state.publicUser.first_name," ",this.state.publicUser.last_name,"..."):null:o.a.createElement("h3",{style:{textAlign:"center",fontFamily:"'Playfair Display', serif",opacity:"70%"}},"This month, I..."),o.a.createElement("a",{style:{position:"relative",left:"50%",marginBottom:"10px"},onClick:function(){return e.setState({isDesc:!e.state.isDesc,summaries:[],hasMore:!0})}},this.state.isDesc?o.a.createElement(X.a,{icon:$.a}):o.a.createElement(X.a,{icon:$.b})),o.a.createElement(W.a,{pageStart:0,loadMore:this.loadSummaries.bind(this),hasMore:this.state.hasMore,loader:o.a.createElement(Z.LoopCircleLoading,{size:"small",style:{position:"relative",left:"50%",marginTop:"20px"}})},t))}}]),t}(r.Component),se=(a(216),a(218),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(g.StripeProvider,{apiKey:S.stripeKey},o.a.createElement("div",null,o.a.createElement(ne.a,null),o.a.createElement(U,{location:window.location.href}),o.a.createElement(M,{path:"/journal/:userId",component:Q}),o.a.createElement(M,{path:"/summaries/:userId/:style",component:le}),o.a.createElement(M,{path:"/settings/:userId",component:oe}),o.a.createElement(f.a,{path:"/public/:userId/journal",component:Q}),o.a.createElement(f.a,{path:"/public/:userId/summaries/:style",component:le}),o.a.createElement(f.a,{exact:!0,path:"/",component:ce}))))}}]),t}(r.Component)),ue=Object(b.a)(se);a.d(t,"AuthProvider",function(){return me});var me=function(e){var t=e.children,a=w();return o.a.createElement(C.Provider,{value:a},t)},pe=function(e){var t=Object(L.b)(),a=t.isAuthenticated,c=t.getAccessTokenSilently,i=Object(r.useContext)(C),l=Object(r.useState)(!0),s=Object(n.a)(l,2),u=s[0],m=s[1],p=function(){m(!1)};return Object(r.useEffect)(function(){i.autoLogin(a,c,p)},[a]),o.a.createElement(o.a.Fragment,null,u?o.a.createElement("div",null,"Loading..."):e.children)};i.a.render(o.a.createElement(L.a,{domain:"dev-ho6uvwopondwbfy0.us.auth0.com",clientId:"mDadHnSi7Nu5FDNA3MZe0FYUwLStYR1r",authorizationParams:{audience:"buffalo-journal.herokuapp.com",redirect_uri:window.location.origin}},o.a.createElement(me,null,o.a.createElement(pe,null,o.a.createElement(l.a,null,o.a.createElement(ue,null))))),document.getElementById("root"))}},[[129,2,1]]]);
//# sourceMappingURL=main.bd2143f4.chunk.js.map